@using TaskStatus = WakeyWakey.Enums.TaskStatus
@model WakeyWakey.Models.Task

<div class="task" data-task-id="@Model.Id">
    <div class="task-header">
        <input type="checkbox" class="task-completed-checkbox" @if(Model.Status == TaskStatus.Completed) { <text>checked</text> } />
        <span class="task-name">@Model.Name</span>
        <a href="@Url.Action("Edit", "Task", new { id = Model.Id })" class="btn edit-task">Edit</a>
    </div>

    <!-- Rest of your task item content -->

</div>

    <div class="task-details">
        <p>@Model.Description</p>
        <p>Category: @Model.Category</p>
        <p>Estimated Duration: @Model.EstimatedDuration</p>
        <p>Overall Duration: @Model.OverallDuration</p>
        <p>Deadline: @(Model.DeadlineDate.HasValue ? Model.DeadlineDate.Value.ToString("yyyy-MM-dd") : "N/A")</p>
        <p>Score: @Model.Score</p>
        <p>Score Weight: @Model.ScoreWeight</p>
        <p>Status: @Model.Status</p>
    </div>
    
    <div class="task-extra-info" id="extra-info-@Model.Id">
        <!-- This will be filled with JavaScript -->
    </div>
    

    @if (Model.Subtasks.Any())
    {
        <div class="subtasks">
            @foreach (var subtask in Model.Subtasks)
            {
                @Html.Partial("_TaskItem", subtask) // Recursively render subtasks
            }
        </div>
    }
</div>


<!--<script>

document.querySelectorAll('.task-toggle').forEach(button => {
    button.addEventListener('click', function() {
        const taskId = this.closest('.task').getAttribute('data-task-id');
        const subtasks = document.querySelector(`.task[data-task-id="${taskId}"] .subtasks`);
        if (subtasks) {
            const isHidden = subtasks.style.display === 'none';
            subtasks.style.display = isHidden ? 'block' : 'none';
            this.innerText = isHidden ? '-' : '+';
        }
    });
});


</script>-->